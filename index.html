<!DOCTYPE html>
<html>
	<head>
		<title>LEGO drawers</title>
		<link rel="stylesheet" href="./style.css">
		<script type="text/javascript">
			window.onload=function(){
				function clear(b,d){
					var l=b.childNodes
					for (var ci=l.length-1;ci>=0;ci--){
						if (!l[ci].classList){
							b.removeChild(l[ci])
						}
						else if (d!=false){
							l[ci]=clear(l[ci],false)
						}
					}
					return b
				}
				function load(dt){
					for (var ci=prd.childNodes[0].childNodes.length-1;ci>=0;ci--){
						prd.childNodes[0].removeChild(prd.childNodes[0].childNodes[ci])
					}
					for (var k of dt){
						var cl=clear(tml.content.cloneNode(true)).childNodes[0]
						cl.childNodes[0].src=`https://www.lego.com/service/bricks/${SP1.includes(k)?"4":"5"}/${SP2.includes(k)?"2":"1"}/${k}`
						prd.childNodes[0].appendChild(cl)
					}
				}
				var pr=clear(clear(document.getElementsByClassName("dr-wr")[0]).childNodes[1]),prd=clear(clear(document.getElementsByClassName("dr-wr")[0]).childNodes[0]),drs=[],tml=document.getElementsByClassName("dr-img")[0]
				var DATA=[[[4121715,4211807],[4514553,4514554,4154753],[4140428,4140801,4140805,4140806,4195303],[4206482,4666579,4211808,6015356,6209519,6089119],[4143005,4211483,4211050,6013938,4211375,4184169,6123815,6135014,6167939,6134197,4562148,6073231,6172538,6203249,4520320,4526119],[4211573,4239601,4211622,4227155,6100030,6170813,6121485,6177114]],[[4143020,4154760,4495927,4495928,4495933,4495934,4495935,4506043,6102621,6133891],[4142132,4142133,4142134,4142135,4211651,4142136,4249021,6097393,6143014,6163687,6176425],[4142599,4142822,4153707,4153718,4154759,4208160,4509376,6102618,4211655],[4177444,4185664,4187122,6057802,6004888,6006140,6006141,6057526,6173004,4198367],[4541926,4558817,6175842,6097571,4540799,6057470,6023994,4540825,6163686,6030433,4558775,6173160],[6208345,6239882,6239905,6268012,6268003,6268004,6268008,6268010,6268014,6054829,4518816,4540101],[6262893,6161294,6219605,6145856,4288259,6100179],[4568006,6176748,6053875]],[[4542573,4542576,4542577,4542578,4542579,6057799],[4542573,4542576,4542577,4542578,4542579,6057799],[4522933,4522937,4522935,4522934,4522938,4620671,6036632,6063602,6171916],[4534909,4534910,4534912,4534913,4534914,4534914,6186105,6167321,6057859],[4645732,4645730,4645733,6001831,6102449,6115616,6115617],[6022752,6022761,6022764,6022768,6114583,6203233,4558878,4558879,4566266,6097568,6132960,6138745,6149999,6163684,4566251,4540801,4541924,4547581,6004093,6005195,6057453,6103634,6212060],[4157669,4163376,4157670,4163377,4163378,4163379,4169195,4169196,4143419,4143417,6132385,4512751,4549886,4511007],[4544140,4100396,4125332,70904,70905]],[[4118980,4120017,4121620,4140345,4141270,4141417,4141628,4168114,4508664,6163689],[6170475,4142823,4143154,4144022,4158923,4585040,4210753,4211713,6211951],[4552347,4552348,4552349,6072627,6194079],[6192130,4587275,4494222,4234386,4505842,4531184,4128554,4128557,4234247,4239896,4240006,4106885,4125191,4125365,4503425,6114935,6215176,4141414,4114200,4141495,4177428,4186852,4211586,6013702,4114295,4114672,4125563,4141518,6194486,4107823,4107824,4107825,4107826,4107828,4107829,4140326,4140843,4141184,4223767,4211566,4111941,4112174,4112287,4112289,4140329,4154522,4172103,4107132,4107133,4107135,4107136,4128641,6170368,4142061,4142061,6009019,6010862,6010863,6010864,4162783,4163533,4164133,4172111,4186678,4186834,4210980,6212140,4141603,4141811,4144138,4142236,4144283,4158874,4171194,4199345,4263131,6029206,6030286,6214344,6007058,6013937],[4121610,4154762,4189936,6074869,6097773,6100751,6137758,6005755,4107066,4119033,4141431,4144297,4144298,6135091,4106378,4107068,4107579,4107084,4106383,4113008,4144282,4227544,6108116,4106379,4107067,4118982,4141729,4172098,4107783,4107798,4107830,4125554,4125554,4211567,4234429,6135092,4106377,4107767,4112205,4125195,4125366,4163263,6072968,6005331,6099801,655302,4107765,4141412,4143148,4106469,4107081,4107800,4107801,4118897,4144128,4512360,4512363,4513174,4519010,4531751,6143028,6212049,4560174,4560175,6168687,6167281]]],SP1=[4518816,4540101,4288259],SP2=[4106379,4107067,4118982,4118982,4141729,4172098,4172098]
				for (var j=0;j<pr.childNodes.length;j++){
					var d=pr.childNodes[j]
					for (var i=0;i<d.childNodes.length;i++){
						drs.push(d.childNodes[i])
						d.childNodes[i].j_=parseInt(j)
						d.childNodes[i].i_=parseInt(i)
						d.childNodes[i].onclick=function(){
							if (!this.classList.contains("open")){
								for (var k of drs){
									k.classList.remove("open")
									k.classList.remove("popen")
								}
								this.classList.add("popen")
								if (prd.classList.contains("rv")){
									prd.classList.remove("rv")
									var ths=this
									setTimeout(function(){
										if (ths.classList.contains("green")){prd.classList.add("green")}
										if (ths.classList.contains("blue")){prd.classList.add("blue")}
										if (ths.classList.contains("red")){prd.classList.add("red")}
										load(DATA[ths.j_][ths.i_])
										setTimeout(function(){
											prd.classList.add("rv")
										},50)
									},200)
								}
								else{
									prd.classList.add("prv")
									if (this.classList.contains("green")){prd.classList.add("green")}
									if (this.classList.contains("blue")){prd.classList.add("blue")}
									if (this.classList.contains("red")){prd.classList.add("red")}
									load(DATA[this.j_][this.i_])
								}
							}
							else{
								for (var k of drs){
									k.classList.remove("open")
									k.classList.remove("popen")
								}
							}
						}
					}
					d.onclick=function(){
						var k=prd.classList.contains("rv")
						prd.classList.remove("rv")
						if (prd.classList.contains("prv")){
							prd.classList.remove("prv")
							prd.classList.add("rv")
						}
						else{
							prd.classList.remove("green")
							prd.classList.remove("blue")
							prd.classList.remove("red")
						}
						for (var k of drs){
							k.classList.remove("open")
							if (k.classList.contains("popen")){
								k.classList.remove("popen")
								k.classList.add("open")
							}
						}
					}
				}
			}
		</script>
		<template class="dr-img">
			<div class="el">
				<img class="el-img" src="SOURCE">
			</div>
		</template>
	</head>
	<body>
		<div class="dr-wr">
			<div class="dr-dsp">
				<div class="dr-dsp-wr">
				</div>
			</div>
			<div class="drs">
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr blue T"></div>
					<div class="dr red S"></div>
					<div class="dr green S"></div>
					<div class="dr red S"></div>
					<div class="dr green S"></div>
				</div>
				<div class="drc">
					<div class="dr green S"></div>
					<div class="dr green T"></div>
					<div class="dr red S"></div>
					<div class="dr green S"></div>
					<div class="dr blue T"></div>
					<div class="dr red S"></div>
					<div class="dr blue T"></div>
					<div class="dr red T"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr green S"></div>
					<div class="dr blue T"></div>
					<div class="dr blue T"></div>
					<div class="dr green S"></div>
					<div class="dr blue T"></div>
					<div class="dr green S"></div>
					<div class="dr red S"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr blue T"></div>
					<div class="dr red S"></div>
					<div class="dr green T"></div>
					<div class="dr blue T"></div>
					<div class="dr blue T"></div>
					<div class="dr blue T"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr red S"></div>
					<div class="dr blue T"></div>
					<div class="dr green T"></div>
					<div class="dr green S"></div>
					<div class="dr red T"></div>
					<div class="dr green T"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr red S"></div>
					<div class="dr red S"></div>
					<div class="dr green S"></div>
					<div class="dr green T"></div>
					<div class="dr blue T"></div>
					<div class="dr red S"></div>
					<div class="dr red S"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr green S"></div>
					<div class="dr blue T"></div>
					<div class="dr green S"></div>
					<div class="dr blue T"></div>
					<div class="dr red S"></div>
					<div class="dr green T"></div>
					<div class="dr green S"></div>
				</div>
				<div class="drc">
					<div class="dr green T"></div>
					<div class="dr red S"></div>
					<div class="dr green T"></div>
					<div class="dr blue T"></div>
					<div class="dr green S"></div>
					<div class="dr green T"></div>
				</div>
			</div>
		</div>
	</body>
</html>